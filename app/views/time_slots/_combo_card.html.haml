- slot_ids = combo_slots.compact.map(&:id)
- input_id = "combo_#{combo_name.parameterize}_#{slot_ids.join('_')}"

- slot_dates = combo_slots.compact
                          .map { |s| s.try(:start_at) || s.try(:starts_at) || s.try(:start_time) }
                          .compact
                          .map(&:to_date)
                          .uniq

- display_date = if slot_dates.present?
                   slot_dates.one? ? slot_dates.first : slot_dates.min
                 else
                   event&.start_date
                 end

.card.d-flex.flex-row.flex-nowrap.bg-white
  .d-flex.flex-column
    - if display_date.present?
      %p.text-black-50= l(display_date, format: "%-m月%-d日(%a)")
    - if image_src.present?
      = image_tag image_src, class: "img-fluid rounded"

  .d-grid.gap-3.w-50{
    data: { controller: "combo", "combo-slot-ids-value": slot_ids.to_json }
  }
    .d-flex.justify-content-center.align-items-center.w-100.flex-column
      %p.fw-bold.fs-5.text-center.mb-0
        ２つのパーティーに参加

    .d-flex.justify-content-center.align-items-center.w-100
      .form-check.form-switch.d-flex.flex-column.align-items-center.gap-2
        %input.form-check-input{ type: "checkbox",
                                id: input_id,
                                role: "switch",
                                data: { combo_target: "switch",
                                        action: "change->combo#toggle" },
                                aria: { label: "２つのパーティーに参加" } }
